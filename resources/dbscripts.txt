CREATE TABLE `APP_USER` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `sso_id` varchar(30) NOT NULL,
  `password` varchar(100) NOT NULL,
  `first_name` varchar(30) NOT NULL,
  `last_name` varchar(30) NOT NULL,
  `email` varchar(30) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `sso_id` (`sso_id`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;


CREATE TABLE `APP_USER_USER_PROFILE` (
  `user_id` bigint(20) NOT NULL,
  `user_profile_id` bigint(20) NOT NULL,
  PRIMARY KEY (`user_id`,`user_profile_id`),
  KEY `FK_USER_PROFILE` (`user_profile_id`),
  CONSTRAINT `FK_APP_USER` FOREIGN KEY (`user_id`) REFERENCES `APP_USER` (`id`),
  CONSTRAINT `FK_USER_PROFILE` FOREIGN KEY (`user_profile_id`) REFERENCES `USER_PROFILE` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;


CREATE TABLE `PERSISTENT_LOGINS` (
  `username` varchar(64) NOT NULL,
  `series` varchar(64) NOT NULL,
  `token` varchar(64) NOT NULL,
  `last_used` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`series`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;


CREATE TABLE `USER_PROFILE` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `type` varchar(30) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `type` (`type`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;











CREATE TABLE `JME_WEIGHMENT_DTL` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `BILLD_BILL_LOT_NO` int(11) NOT NULL,
  `BILLD_BILL_COUNT` varchar(20) DEFAULT NULL,
  `BILLD_WGT_KGS` decimal(10,3) DEFAULT NULL,
  `BILLD_NO_OF_NETS` varchar(10) DEFAULT NULL,
  `BILLD_CRE_ID` varchar(10) DEFAULT NULL,
  `BILLD_CRE_DT` date DEFAULT NULL,
  `BILLD_UPD_ID` varchar(10) DEFAULT NULL,
  `BILLD_UPD_DT` date DEFAULT NULL,
  PRIMARY KEY (`ID`),
  KEY `FK_BILLD_ID` (`BILLD_BILL_LOT_NO`),
  CONSTRAINT `FK_BILLD_ID` FOREIGN KEY (`BILLD_BILL_LOT_NO`) REFERENCES `JME_WEIGHMENT` (`LOT_NO`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;


CREATE TABLE `JME_WEIGHMENT` (
  `LOT_NO` int(11) NOT NULL AUTO_INCREMENT,
  `PLANT_ID` varchar(20) DEFAULT NULL,
  `CHQUE_NAME` varchar(200) DEFAULT NULL,
  `FARMER_NAME` varchar(200) DEFAULT NULL,
  `FARMER_MOBILE` varchar(10) DEFAULT NULL,
  `AGENT_NAME` varchar(200) DEFAULT NULL,
  `AGENT_MOBILE` varchar(10) DEFAULT NULL,
  `PLACE` varchar(50) DEFAULT NULL,
  `DATE` date DEFAULT NULL,
  `VIM` char(1) DEFAULT NULL,
  `BT` char(1) DEFAULT NULL,
  `SIGN_GRADER` varchar(200) DEFAULT NULL,
  `GRADER_MOBILE` varchar(10) DEFAULT NULL,
  `VERIFYED_BY` varchar(200) DEFAULT NULL,
  `HALT` varchar(20) DEFAULT NULL,
  `COUNT` varchar(20) DEFAULT NULL,
  `CRE_ID` varchar(10) DEFAULT NULL,
  `CRE_DT` date DEFAULT NULL,
  `UPD_ID` varchar(10) DEFAULT NULL,
  `UPD_DT` date DEFAULT NULL,
  `BILL_TRUCK_NUMBER` varchar(20) DEFAULT NULL,
  `BILL_DRIVER_NAME` varchar(20) DEFAULT NULL,
  `BILL_DISPATCHED` varchar(20) DEFAULT NULL,
  `BILL_DISPATCH_TIME` datetime DEFAULT NULL,
  `BILL_ARRIVAL_TIME` datetime DEFAULT NULL,
  `BILL_STATUS` varchar(20) DEFAULT NULL,
  `BILL_ICE_QTY` decimal(10,3) DEFAULT NULL,
  `BILL_GRADER_PH` varchar(45) DEFAULT NULL,
  `bill_dispatched_bvrm` tinyint(1) DEFAULT NULL,
  `bill_dispatched_nsp` tinyint(1) DEFAULT NULL,
  PRIMARY KEY (`LOT_NO`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;


<!--Need to execute-->






CREATE TABLE `JME_PURCHASE_BILL_TUBS` (
  `BILLD_TUB_ID` int(11) NOT NULL AUTO_INCREMENT,
  `BILLD_BILL_ID` int(11) NOT NULL,
  `BILL_LOT_NO` varchar(20) NOT NULL,
  `BILLD_MATERIAL_TUBS` varchar(20) DEFAULT NULL,
  `BILLD_EMPTY` varchar(20) DEFAULT NULL,
  `BILLD_TOTAL_TUBS` varchar(100) DEFAULT NULL,
  `BILLD_QUANTITY` double(6,3) DEFAULT NULL,
  PRIMARY KEY (`BILLD_TUB_ID`),
  KEY `FK_BILLD_TUB_ID` (`BILLD_BILL_ID`),
  CONSTRAINT `FK_BILLD_TUB_ID` FOREIGN KEY (`BILLD_BILL_ID`) REFERENCES `JME_PURCHASE_BILL_REPORT` (`BILL_ID`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;


CREATE TABLE `JME_PURCHASE_COMP_COUNT_DTL` (
  `BILLD_COMP_COUNT_ID` int(11) NOT NULL AUTO_INCREMENT,
  `BILLD_BILL_ID` int(11) NOT NULL,
  `BILL_LOT_NO` varchar(20) NOT NULL,
  `25KGCOUNT` varchar(20) DEFAULT NULL,
  `PEELING` varchar(20) DEFAULT NULL,
  `DISCOLORED` double(6,3) DEFAULT NULL,
  `BLACKSPOT` double(6,3) DEFAULT NULL,
  PRIMARY KEY (`BILLD_COMP_COUNT_ID`),
  KEY `FK_BILLD_BILL_ID` (`BILLD_BILL_ID`),
  CONSTRAINT `FK_BILLD_BILL_ID` FOREIGN KEY (`BILLD_BILL_ID`) REFERENCES `JME_PURCHASE_BILL_REPORT` (`BILL_ID`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

CREATE TABLE `JME_PURCHASE_PAY_AMT` (
  `BILLD_PAY_ID` int(11) NOT NULL AUTO_INCREMENT,
  `BILLD_PAY_BILL_ID` int(11) NOT NULL,
  `BILL_LOT_NO` varchar(20) NOT NULL,
  `BILLD_VARIETY_ID` varchar(20) DEFAULT NULL,
  `BILLD_COUNT` varchar(20) DEFAULT NULL,
  `BILLD_QUANTITY` double(6,3) DEFAULT NULL,
  `BILLD_PUR_QUANTITY` double(6,3) DEFAULT NULL,
  `BILLD_PUR_RATE` double(6,3) DEFAULT NULL,
  `TOTAL_INVOICE_AMT` decimal(10,0) DEFAULT NULL,
  `TOTAL_INVOICE_QTY` decimal(10,0) DEFAULT NULL,
  PRIMARY KEY (`BILLD_PAY_ID`),
  KEY `FK_BILLD_PAY_ID` (`BILLD_PAY_BILL_ID`),
  CONSTRAINT `FK_BILLD_PAY_ID` FOREIGN KEY (`BILLD_PAY_BILL_ID`) REFERENCES `JME_PURCHASE_BILL_REPORT` (`BILL_ID`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;




CREATE TABLE `JME_PURCHASE_BILL_REPORT` (
  `BILL_ID` int(11) NOT NULL AUTO_INCREMENT,
  `BILL_REPORT_LOT_NO` int(11) NOT NULL,
  `BILL_DRIVER_NAME` varchar(20) DEFAULT NULL,
  `BILL_GRADER_NAME` varchar(20) DEFAULT NULL,
  `BILL_SUPERVISOR_NAME` varchar(20) DEFAULT NULL,
  `BILL_PURCHAGE_MANAGER` varchar(20) DEFAULT NULL,
  `BILL_PURCHAGE_AUTHORIZED` varchar(20) DEFAULT NULL,
  `BILL_PLANT_MANAGER` varchar(20) DEFAULT NULL,
  `BILL_ACCOUNT_MANAGER` varchar(20) DEFAULT NULL,
  `BILL_AUTHORIZED` varchar(20) DEFAULT NULL,
  `CRE_ID` varchar(20) DEFAULT NULL,
  `CRE_DT` date DEFAULT NULL,
  `UPD_ID` varchar(20) DEFAULT NULL,
  `UPD_DT` date DEFAULT NULL,
  `bill_dispatched_bvrm` tinyint(1) DEFAULT NULL,
  `bill_dispatched_nsp` tinyint(1) DEFAULT NULL,
  `BILL_CERTIFICATE` tinyint(1) DEFAULT NULL,
  `BILL_NO_CERTIFICATE` tinyint(1) DEFAULT NULL,
  `TOTAL_INVOICE_AMT` decimal(10,0) DEFAULT NULL,
  `TOTAL_INVOICE_QTY` decimal(10,0) DEFAULT NULL,
  `BILL_STATUS` varchar(200) DEFAULT NULL,
  PRIMARY KEY (`BILL_ID`),
  KEY `FK_BILL_REPORT_LOT_NO` (`BILL_REPORT_LOT_NO`),
  CONSTRAINT `FK_BILL_REPORT_LOT_NO` FOREIGN KEY (`BILL_REPORT_LOT_NO`) REFERENCES `JME_WEIGHMENT` (`LOT_NO`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;



CREATE TABLE `JME_PURCHASE_PLANT` (
  `BILLD_PLANT_ID` int(11) NOT NULL,
  `BILLD_PLANT_NAME` varchar(20) DEFAULT NULL,
  UNIQUE KEY `BILLD_PLANT_ID` (`BILLD_PLANT_ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `JME_PURCHASE_SHRIMP_VARIETY` (
  `BILLD_VARIETY_ID` int(11) NOT NULL,
  `BILLD_SHRIMP_TYPE` varchar(20) DEFAULT NULL,
  UNIQUE KEY `BILLD_VARIETY_ID` (`BILLD_VARIETY_ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `JME_PURCHASE_WORKFLOW` (
  `WORKFLOW_ID` int(11) NOT NULL AUTO_INCREMENT,
  `BILL_ID` varchar(20) DEFAULT NULL,
  `LOT_ID` varchar(20) DEFAULT NULL,
  `BILLD_CRE_ID` varchar(20) DEFAULT NULL,
  `BILLD_UPDATED_ID` varchar(20) DEFAULT NULL,
  `BILLD_CRE_DT` varchar(45) DEFAULT NULL,
  `BILLD_UPD_DT` varchar(45) DEFAULT NULL,
  `BILLD_UPD_ID` varchar(45) DEFAULT NULL,
  `LOT_NO` varchar(45) DEFAULT NULL,
  `STATUS` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`WORKFLOW_ID`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;



ALTER TABLE `jme`.`JME_PURCHASE_BILL_REPORT` 
CHANGE COLUMN `TOTAL_INVOICE_AMT` `TOTAL_INVOICE_AMT` DECIMAL(10,3) NULL DEFAULT NULL ,
CHANGE COLUMN `TOTAL_INVOICE_QTY` `TOTAL_INVOICE_QTY` DECIMAL(10,3) NULL DEFAULT NULL ;

alter table jme.JME_PURCHASE_COMP_COUNT_DTL add column BILLD_COMP_COUNT int;


ALTER TABLE `jme`.`JME_PURCHASE_BILL_TUBS` 
CHANGE COLUMN `BILLD_QUANTITY` `BILLD_QUANTITY` DECIMAL(10,3) NULL DEFAULT NULL ;

